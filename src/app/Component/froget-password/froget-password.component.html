<section class="py-5">
  <h1 class="text-center text-dark mb-4">Forgot Password</h1>
  <div class="container d-flex justify-content-center gap-4">
    @if (steep == 1) {
    <form
      [formGroup]="VerifyEmail"
      class="shadow-sm p-4 rounded bg-light w-75"
      style="max-width: 400px"
      (ngSubmit)="SubmitVerifyEmail()"
    >
      <div class="mb-3">
        <label for="email" class="form-label fw-bold">Email</label>
        <input
          [ngClass]="{
            'is-valid':
              !VerifyEmail.get('email')?.errors &&
              VerifyEmail.get('email')?.touched,
            'is-invalid':
              VerifyEmail.get('email')?.errors &&
              VerifyEmail.get('email')?.touched
          }"
          formControlName="email"
          id="email"
          class="form-control"
          type="email"
          placeholder="Enter your email"
          required
        />
        <!-- Error Messages -->
        @if (VerifyEmail.get('email')?.errors &&
        VerifyEmail.get('email')?.touched) {
        <div class="alert alert-danger mt-2">
          @if (VerifyEmail.get('email')?.getError('required')) {
          <p class="m-0">Email address is required.</p>
          } @else if (VerifyEmail.get('email')?.getError('email')) {
          <p class="m-0">Please enter a valid email address.</p>
          }
        </div>

        }
        <!-- Helper Text -->
        <div class="form-text text-muted text-center mb-3">
          We'll send a verification code to your email.
        </div>
        <!-- Submit Button -->
        <button
          type="submit"
          [disabled]="VerifyEmail.invalid"
          class="btn btn-primary w-100"
        >
          Verify Email
        </button>
      </div>
    </form>

    } @else if (steep === 2) {
    <form
      [formGroup]="VerifyRestCode"
      class="shadow-sm p-4 rounded bg-light w-75"
      style="max-width: 400px"
      (ngSubmit)="SubmitVerifyCode()"
    >
      <!-- Reset Code Input -->
      <div class="mb-3">
        <label for="resetCode" class="form-label fw-bold">Reset Code</label>
        <input
          [ngClass]="{
            'is-valid':
              !VerifyRestCode.get('resetCode')?.errors &&
              VerifyRestCode.get('resetCode')?.touched,
            'is-invalid':
              VerifyRestCode.get('resetCode')?.errors &&
              VerifyRestCode.get('resetCode')?.touched
          }"
          formControlName="resetCode"
          id="resetCode"
          class="form-control"
          type="text"
          placeholder="Enter reset code"
          required
        />
        <!-- Error Messages -->
        @if (VerifyRestCode.get('resetCode')?.errors &&
        VerifyRestCode.get('resetCode')?.touched) {
        <div class="alert alert-danger mt-2">
          @if (VerifyRestCode.get('resetCode')?.getError('required')) {
          <p class="m-0">Reset code is required.</p>
          } @else if (VerifyRestCode.get('resetCode')?.getError('minLength')) {
          <p class="m-0">Reset code must be 6 characters long.</p>
          } @else if (VerifyRestCode.get('resetCode')?.getError('maxLength')) {
          <p class="m-0">Reset code must be 6 characters long.</p>
          }
        </div>
        }
      </div>
      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="VerifyRestCode.invalid"
        class="btn btn-primary w-100"
      >
        Verify Reset Code
      </button>
      <!-- Back Button -->
    </form>
    } @else if (steep === 3) {
    <form
      [formGroup]="ResetPassword"
      class="shadow-sm p-4 rounded bg-light w-75"
      style="max-width: 400px"
      (ngSubmit)="RestPasswordSubmit()"
    >
      <!-- Email Input -->
      <div class="mb-3">
        <label for="email" class="form-label fw-bold">Email</label>
        <input
          [ngClass]="{
            'is-valid':
              !ResetPassword.get('email')?.errors &&
              ResetPassword.get('email')?.touched,
            'is-invalid':
              ResetPassword.get('email')?.errors &&
              ResetPassword.get('email')?.touched
          }"
          formControlName="email"
          id="email"
          class="form-control"
          type="email"
          placeholder="Enter your email"
          required
        />
        <!-- Error Messages for Email -->
        @if (ResetPassword.get('email')?.errors &&
        ResetPassword.get('email')?.touched) {
        <div class="alert alert-danger mt-2">
          @if (ResetPassword.get('email')?.getError('required')) {
          <p class="m-0">Email is required.</p>
          } @else if (ResetPassword.get('email')?.getError('email')) {
          <p class="m-0">Please enter a valid email address.</p>
          }
        </div>
        }
      </div>
      <!-- New Password Input -->
      <div class="mb-3">
        <label for="newPassword" class="form-label fw-bold">New Password</label>
        <input
          [ngClass]="{
            'is-valid':
              !ResetPassword.get('newPassword')?.errors &&
              ResetPassword.get('newPassword')?.touched,
            'is-invalid':
              ResetPassword.get('newPassword')?.errors &&
              ResetPassword.get('newPassword')?.touched
          }"
          formControlName="newPassword"
          id="newPassword"
          class="form-control"
          type="password"
          placeholder="Enter new password"
          required
        />
        <!-- Error Messages for New Password -->
        @if (ResetPassword.get('newPassword')?.errors &&
        ResetPassword.get('newPassword')?.touched) {
        <div class="alert alert-danger mt-2">
          @if (ResetPassword.get('newPassword')?.getError('required')) {
          <p class="m-0">New password is required.</p>
          } @else if (ResetPassword.get('newPassword')?.getError('pattern')) {
          <p class="m-0">
            Password must be at least 6 characters long and contain only
            letters, numbers, or underscores.
          </p>
          }
        </div>
        }
      </div>
      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="ResetPassword.invalid"
        class="btn btn-primary w-100"
      >
        Reset Password
      </button>
    </form>
    }
  </div>
</section>
